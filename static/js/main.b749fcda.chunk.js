(this["webpackJsonpdiarybook-redux"]=this["webpackJsonpdiarybook-redux"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c.n(s),r=c(14),a=c.n(r),o=c(6),i=c(7),l=c(3),b=c(10),d=c(13),j=Object(d.b)({name:"posts",initialState:[],reducers:{addPost:function(e,t){e.unshift({id:Object(d.c)(),title:t.payload.title,description:t.payload.description,date:new Date})},removePost:function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))},editPost:function(e,t){var c=e.findIndex((function(e){return e.id===t.payload.id}));e[c].title=t.payload.title,e[c].description=t.payload.description},loadPosts:function(){var e=JSON.parse(localStorage.getItem("store"));return e?(e.posts.forEach((function(e){e.date=new Date(e.date)})),e.posts):[]}}}),u=j.actions,x=u.addPost,h=u.removePost,p=u.editPost,O=u.loadPosts,m=j.reducer,g=c(1);function f(){var e=Object(s.useState)(""),t=Object(b.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(""),a=Object(b.a)(r,2),d=a[0],j=a[1],u=Object(s.useState)(null),h=Object(b.a)(u,2),p=h[0],O=h[1],m=Object(o.b)(),f=Object(l.g)();return Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c&&d?(m(x({title:c,description:d})),f.push("/")):O("All fields must be filled up")},className:"flex flex-col items-center gap-4",children:[Object(g.jsx)(i.b,{to:"/",className:"self-start bg-green-400 hover:bg-green-500",children:"Go to home page"}),Object(g.jsx)("h1",{className:"text-3xl font-bold",children:"Create a new post"}),Object(g.jsx)("input",{type:"text",className:"font-semibold",value:c,placeholder:"Title...",onChange:function(e){return n(e.target.value)}}),Object(g.jsx)("textarea",{value:d,placeholder:"Description...",onChange:function(e){return j(e.target.value)}}),p&&Object(g.jsx)("p",{className:"text-red-500 font-semibold",children:p}),Object(g.jsx)("input",{type:"submit",value:"Add new post"})]})}function v(){var e=Object(l.h)().id,t=Object(s.useState)(""),c=Object(b.a)(t,2),n=c[0],r=c[1],a=Object(s.useState)(""),d=Object(b.a)(a,2),j=d[0],u=d[1],x=Object(s.useState)(null),h=Object(b.a)(x,2),O=h[0],m=h[1],f=Object(o.b)(),v=Object(l.g)();return Object(g.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n&&j?(f(p({id:e,title:n,description:j})),v.push("/")):m("All fields must be filled up")},className:"flex flex-col items-center gap-4",children:[Object(g.jsx)(i.b,{to:"/posts/".concat(e),className:"self-start bg-green-400 hover:bg-green-500",children:"Go back"}),Object(g.jsx)("h1",{className:"text-3xl font-bold",children:"Edit post"}),Object(g.jsx)("input",{type:"text",className:"font-semibold",value:n,placeholder:"Title...",onChange:function(e){return r(e.target.value)}}),Object(g.jsx)("textarea",{value:j,placeholder:"Description...",onChange:function(e){return u(e.target.value)}}),O&&Object(g.jsx)("p",{className:"text-red-500 font-semibold",children:O}),Object(g.jsx)("input",{type:"submit",value:"Edit post"})]})}function N(e){var t=e.getMinutes();return t<10&&(t="0"+t),e.toLocaleDateString()+" "+e.getHours()+":"+t}function y(){var e=Object(o.b)(),t=Object(l.g)(),c=Object(l.h)().id,n=Object(o.c)((function(e){return e.posts.find((function(e){return e.id===c}))})),r=Object(s.useState)(!1),a=Object(b.a)(r,2),d=a[0],j=a[1];return n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(i.b,{to:"/",className:"bg-green-400 hover:bg-green-500",children:"Go to home page"}),Object(g.jsxs)("div",{className:"px-4 mt-4",children:[Object(g.jsx)("h1",{className:"text-3xl font-bold text-center",children:n.title}),Object(g.jsx)("p",{className:"text-lg",children:n.description}),Object(g.jsx)("p",{children:N(n.date)})]}),Object(g.jsxs)("div",{className:"my-4 flex gap-4 justify-center",children:[Object(g.jsx)(i.b,{to:"/posts/edit/".concat(c),className:"bg-gray-300 hover:bg-gray-400",children:"Edit post"}),Object(g.jsx)("button",{className:"bg-red-500 hover:bg-red-600",onClick:function(){return j(!0)},children:"Remove post"})]}),d&&Object(g.jsx)("div",{className:"fixed top-0 left-0 w-screen h-screen bg-white bg-opacity-90 backdrop-blur",children:Object(g.jsxs)("div",{className:"w-full md:w-96 shadow-lg absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 p-6",children:[Object(g.jsx)("p",{children:"Are you sure you want remove this post?"}),Object(g.jsxs)("div",{className:"mt-4 flex gap-2",children:[Object(g.jsx)("button",{className:"bg-red-500 hover:bg-red-600",onClick:function(){e(h({id:c})),t.push("/")},children:"Remove post"}),Object(g.jsx)("button",{className:"bg-gray-300 hover:bg-gray-400",onClick:function(){return j(!1)},children:"Go back"})]})]})})]}):Object(g.jsx)(l.a,{to:"/"})}function S(){var e=Object(o.c)((function(e){return e.posts}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{className:"text-4xl font-bold text-center",children:"Your posts"}),e.length>0?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(i.b,{to:"/add",className:"bg-green-400 hover:bg-green-500",children:"Add post"}),e.map((function(e){var t=e.title,c=e.description,s=e.id,n=e.date;return Object(g.jsxs)("div",{className:"mt-4 border-b-2 flex justify-between",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"text-3xl font-bold",children:t}),Object(g.jsx)("p",{className:"text-lg",children:c}),Object(g.jsx)("p",{children:N(n)})]}),Object(g.jsx)("div",{children:Object(g.jsx)(i.b,{to:"/posts/".concat(s),className:"bg-gray-300 hover:bg-gray-400",children:"More options"})})]},s)}))]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{className:"mt-4 text-2xl text-center",children:"You don't have post here!"}),Object(g.jsx)(i.b,{to:"/add",className:"mt-4 mx-auto bg-green-400 hover:bg-green-500",children:"Add post"})]})]})}var w=function(){var e=Object(o.b)();return Object(s.useEffect)((function(){e(O())}),[e]),Object(g.jsx)("div",{className:"container mx-auto p-4",children:Object(g.jsx)(i.a,{basename:"/",children:Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{exact:!0,path:"/",children:Object(g.jsx)(S,{})}),Object(g.jsx)(l.b,{path:"/add",children:Object(g.jsx)(f,{})}),Object(g.jsx)(l.b,{path:"/posts/edit/:id",children:Object(g.jsx)(v,{})}),Object(g.jsx)(l.b,{path:"/posts/:id",children:Object(g.jsx)(y,{})}),Object(g.jsx)(l.b,{path:"*",children:Object(g.jsx)(l.a,{to:"/"})})]})})})},k=Object(d.a)({reducer:{posts:m}});k.subscribe((function(){localStorage.setItem("store",JSON.stringify(k.getState()))}));c(30);a.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(o.a,{store:k,children:Object(g.jsx)(w,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.b749fcda.chunk.js.map